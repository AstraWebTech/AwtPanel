import{b as k,m as q,l as y,r as c,c as V,o as m,g as r,d as M,t as w,e as l,q as o,h as B}from"./index-BAXmEHhy.js";import{u as L,V as S}from"./VueForm-O9zZ3Pf2.js";import"./PreLoader-YXgQimiW.js";const x={class:"container"},F={__name:"AddSite",setup(f){const{t:a}=k(),s=q(),{request:u,isLoading:p}=y(),{fields:n,validate:h,getFieldsDataToRequest:v,clearValues:_}=L([{key:"name",name:"name",required:!0,validate:!0},{key:"file",name:"previewImg",label:a("parameters.img"),required:!1,validate:!1},{key:"url",label:a("parameters.url"),required:!0,validate:!1},{key:"selectServer",required:!0,validate:!1},{key:"selectBD",required:!1,validate:!1},{key:"selectGit",required:!1,validate:!1}],[{key:"id",name:"id",required:!0,value:s.params.id}]),i=c(!1),b=c("");s.params.id&&u({method:"get",url:"http://localhost:3000/api/element",params:{table:"sites",id:s.params.id}}).then(e=>{Object.keys(e.data).forEach(t=>{n.value.find(d=>(d.name===t&&(d.value=e.data[t]),!1))})}).catch(e=>{console.error(e)});const g=()=>{h()&&u({method:s.params.id?"put":"post",url:"http://localhost:3000/api/element",data:{table:"sites",data:v()}}).then(e=>{_(),i.value=!0,setTimeout(()=>{i.value=!1},3e3)}).catch(e=>{console.error(e)})};return(e,t)=>(m(),V("div",x,[r("h2",null,w(l(a)("subtitles.add_site")),1),t[0]||(t[0]=r("div",{class:"formAlert"},[o("Добавить сайт вы сможете если у вас добавлен "),r("b",null,"Сервер"),o(", "),r("b",null,"GIT"),o(", "),r("b",null,"База данных"),o(".")],-1)),M(S,{fields:l(n),isLoading:l(p),errorMessage:b.value,showOkMessage:i.value,onSubmit:g,buttonLabel:l(a)("functional_phrases.add")},null,8,["fields","isLoading","errorMessage","showOkMessage","buttonLabel"])]))}},I={__name:"SiteFormView",setup(f){return(a,s)=>(m(),B(F))}};export{I as default};
